---
title: "Teletrabajo y Salud Mental"
author: "Paula Quirós, Carlota García y Alma Caneiro"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
    toc_float: true 
--- 
<style>
body {
text-align: justify}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
# Introducción

La relación entre la salud mental y el empleo, especialmente en los trabajos que nos llevan a pasar muchas horas frente a un ordenador, ha cobrado una importancia creciente en los últimos años debido al aumento de casos de ansiedad, episodios depresivos y estrés laboral, así como otro tipo de enfermedades mentales entre los profesionales de los diferentes sectores. Nuestro seminario aborda este vínculo.

Buscamos analizar cómo el aislamiento social, la falta de contacto humano, la monotonía y la dificultad para separar la vida laboral de la personal contribuyen a deteriorar el bienestar emocional de las personas que trabajan en espacios confinados. Además, queremos comprender por qué estos factores pueden desencadenar problemas como ansiedad, estrés, depresión y trastornos del sueño, y cómo el entorno laboral puede influir en la aparición y agravamiento de estos síntomas.


#  Objetivos

## Objetivo General
Demostrar si es que existe, la relación entre episodios depresivos y el teletrabajo, en la actualidad. 


## Objetivos Específicos

1. Analizar la relación entre el porcentaje de teletrabajo en las comunidades autónomas de España y los indicadores de salud mental de su población. 



# Metodología y Resultados

A continuacion cargamos las siguientes librerias

```{r librerias, eval=TRUE, message=FALSE, warning=FALSE}

library(tidyverse) 
library(readr)    


library(rjson)
library(tidyjson)

library(ggplot2)   # Gráficos estáticos
library(plotly)    # Gráficos interactivos
library(DT)        # Tablas interactivas
library(mapSpain)  # Para los mapas
library(gganimate)

```

### Cargamos el primer archivo (el CSV)

Ahora, vamos a leer tu primer archivo de datos. Los datos los hemos recopilado de páginas estatales como el Instituto Nacional de Estadística y "datos.gob" así como de la página estatal del Instituto Canario de Estadística (instac). Necesitamos cargar el archivo `episodios depresivos.csv`.


```{r carga_csv_depresion, eval=TRUE}
# Cargamos el archivo CSV de episodios depresivos

depresion_raw <- read_delim(
  "input/data/episodios_depresivos.csv",
  delim = ";",
  escape_double = FALSE,
  trim_ws = TRUE,
  locale = locale(encoding = "ISO-8859-1")
)


# Mostramos la tabla para ver cómo ha salido
datatable(depresion_raw)
```

Procedemos a cargar el archivo .json con los datos de teletrabajo

```{r carga_json_teletrabajo, eval=TRUE, message=FALSE, warning=FALSE}
# Cargamos el archivo JSON de teletrabajo
teletrabajo_json <- fromJSON(file = "input/data/teletrabajo.json")


# VAMOS A VER QUÉ NOMBRES TIENE
teletrabajo_valores <- teletrabajo_json %>%
  enter_object(Data) %>%
  gather_array %>%
  spread_all
  

# Mostramos la tabla para ver los nombres verdaderos
datatable(teletrabajo_valores)

# (Asumimos que en tu JSON se llaman "MetaData" y "Nombre")
teletrabajo_ccaa <- teletrabajo_json %>%
  enter_object(MetaData) %>%
  gather_array %>%
  spread_all %>%
  select(Nombre, document.id)

teletrabajo_raw <- full_join(teletrabajo_valores, teletrabajo_ccaa, by = "document.id")

# Mostramos la tabla limpia
datatable(teletrabajo_raw)